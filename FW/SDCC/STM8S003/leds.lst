                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ANSI-C Compiler
                                      3 ; Version 4.1.0 #12072 (Linux)
                                      4 ;--------------------------------------------------------
                                      5 	.module leds
                                      6 	.optsdcc -mstm8
                                      7 	
                                      8 ;--------------------------------------------------------
                                      9 ; Public variables in this module
                                     10 ;--------------------------------------------------------
                                     11 	.globl _leds_cathode
                                     12 	.globl _leds_anode
                                     13 	.globl _LedsInit
                                     14 	.globl _UpdateLedState
                                     15 	.globl _SetLedRaw
                                     16 	.globl _GetLedState
                                     17 	.globl _SetLedState
                                     18 ;--------------------------------------------------------
                                     19 ; ram data
                                     20 ;--------------------------------------------------------
                                     21 	.area DATA
                           000000    22 Fleds$ledsState$0_0$0==.
      000000                         23 _ledsState:
      000000                         24 	.ds 2
                           000002    25 Lleds.UpdateLedState$ledId$1_0$325==.
      000002                         26 _UpdateLedState_ledId_65536_325:
      000002                         27 	.ds 1
                           000003    28 Lleds.UpdateLedState$ledIdPrev$1_0$325==.
      000003                         29 _UpdateLedState_ledIdPrev_65536_325:
      000003                         30 	.ds 1
                                     31 ;--------------------------------------------------------
                                     32 ; ram data
                                     33 ;--------------------------------------------------------
                                     34 	.area INITIALIZED
                                     35 ;--------------------------------------------------------
                                     36 ; absolute external ram data
                                     37 ;--------------------------------------------------------
                                     38 	.area DABS (ABS)
                                     39 
                                     40 ; default segment ordering for linker
                                     41 	.area HOME
                                     42 	.area GSINIT
                                     43 	.area GSFINAL
                                     44 	.area CONST
                                     45 	.area INITIALIZER
                                     46 	.area CODE
                                     47 
                                     48 ;--------------------------------------------------------
                                     49 ; global & static initialisations
                                     50 ;--------------------------------------------------------
                                     51 	.area HOME
                                     52 	.area GSINIT
                                     53 	.area GSFINAL
                                     54 	.area GSINIT
                           000000    55 	G$UpdateLedState$0$0 ==.
                           000000    56 	C$leds.c$97$1_0$325 ==.
                                     57 ;	../src/leds.c: 97: static uint8_t ledId = 0;
                                     58 ; genAssign
      000000 72 5Fu00u02      [ 1]   59 	clr	_UpdateLedState_ledId_65536_325+0
                           000004    60 	C$leds.c$98$1_0$325 ==.
                                     61 ;	../src/leds.c: 98: static uint8_t ledIdPrev = NUM_OF_LEDS-1;
                                     62 ; genAssign
      000004 35 0Bu00u03      [ 1]   63 	mov	_UpdateLedState_ledIdPrev_65536_325+0, #0x0b
                                     64 ;--------------------------------------------------------
                                     65 ; Home
                                     66 ;--------------------------------------------------------
                                     67 	.area HOME
                                     68 	.area HOME
                                     69 ;--------------------------------------------------------
                                     70 ; code
                                     71 ;--------------------------------------------------------
                                     72 	.area CODE
                           000000    73 	G$LedsInit$0$0 ==.
                           000000    74 	C$leds.c$55$0_0$319 ==.
                                     75 ;	../src/leds.c: 55: void LedsInit( void )
                                     76 ; genLabel
                                     77 ;	-----------------------------------------
                                     78 ;	 function LedsInit
                                     79 ;	-----------------------------------------
                                     80 ;	Register assignment is optimal.
                                     81 ;	Stack space usage: 0 bytes.
      000000                         82 _LedsInit:
                           000000    83 	C$leds.c$57$1_0$319 ==.
                                     84 ;	../src/leds.c: 57: ledsState = 0x00;
                                     85 ; genAssign
      000000 5F               [ 1]   86 	clrw	x
      000001 CFu00u00         [ 2]   87 	ldw	_ledsState+0, x
                           000004    88 	C$leds.c$58$1_0$319 ==.
                                     89 ;	../src/leds.c: 58: GpioInit();
                                     90 ; genCall
      000004 CCr00r08         [ 2]   91 	jp	_GpioInit
                                     92 ; genLabel
      000007                         93 00101$:
                           000007    94 	C$leds.c$59$1_0$319 ==.
                                     95 ;	../src/leds.c: 59: }
                                     96 ; genEndFunction
                           000007    97 	C$leds.c$59$1_0$319 ==.
                           000007    98 	XG$LedsInit$0$0 ==.
      000007 81               [ 4]   99 	ret
                           000008   100 	Fleds$GpioInit$0$0 ==.
                           000008   101 	C$leds.c$72$1_0$322 ==.
                                    102 ;	../src/leds.c: 72: static void GpioInit( void ){
                                    103 ; genLabel
                                    104 ;	-----------------------------------------
                                    105 ;	 function GpioInit
                                    106 ;	-----------------------------------------
                                    107 ;	Register assignment is optimal.
                                    108 ;	Stack space usage: 0 bytes.
      000008                        109 _GpioInit:
                           000008   110 	C$leds.c$75$2_0$322 ==.
                                    111 ;	../src/leds.c: 75: for(idx = 0; idx < NUM_OF_LEDS; idx++){
                                    112 ; genAssign
      000008 4F               [ 1]  113 	clr	a
                                    114 ; genLabel
      000009                        115 00102$:
                           000009   116 	C$leds.c$76$3_0$323 ==.
                                    117 ;	../src/leds.c: 76: SetLedRaw(idx, LED_OFF_STATE);
                                    118 ; genIPush
      000009 88               [ 1]  119 	push	a
      00000A 4B 00            [ 1]  120 	push	#0x00
                                    121 ; genIPush
      00000C 88               [ 1]  122 	push	a
                                    123 ; genCall
      00000D CDr00r5A         [ 4]  124 	call	_SetLedRaw
      000010 85               [ 2]  125 	popw	x
      000011 84               [ 1]  126 	pop	a
                           000012   127 	C$leds.c$75$2_0$322 ==.
                                    128 ;	../src/leds.c: 75: for(idx = 0; idx < NUM_OF_LEDS; idx++){
                                    129 ; genPlus
      000012 4C               [ 1]  130 	inc	a
                                    131 ; genCmp
                                    132 ; genCmpTop
      000013 A1 0C            [ 1]  133 	cp	a, #0x0c
      000015 24 03            [ 1]  134 	jrnc	00112$
      000017 CCr00r09         [ 2]  135 	jp	00102$
      00001A                        136 00112$:
                                    137 ; skipping generated iCode
                                    138 ; genLabel
      00001A                        139 00104$:
                           00001A   140 	C$leds.c$78$2_0$322 ==.
                                    141 ;	../src/leds.c: 78: }
                                    142 ; genEndFunction
                           00001A   143 	C$leds.c$78$2_0$322 ==.
                           00001A   144 	XFleds$GpioInit$0$0 ==.
      00001A 81               [ 4]  145 	ret
                           00001B   146 	G$UpdateLedState$0$0 ==.
                           00001B   147 	C$leds.c$95$2_0$325 ==.
                                    148 ;	../src/leds.c: 95: void UpdateLedState( void )
                                    149 ; genLabel
                                    150 ;	-----------------------------------------
                                    151 ;	 function UpdateLedState
                                    152 ;	-----------------------------------------
                                    153 ;	Register assignment might be sub-optimal.
                                    154 ;	Stack space usage: 0 bytes.
      00001B                        155 _UpdateLedState:
                           00001B   156 	C$leds.c$101$1_0$325 ==.
                                    157 ;	../src/leds.c: 101: ledId = (ledId == NUM_OF_LEDS-1)?0:(ledId+1);
                                    158 ; genCmpEQorNE
      00001B C6u00u02         [ 1]  159 	ld	a, _UpdateLedState_ledId_65536_325+0
      00001E A1 0B            [ 1]  160 	cp	a, #0x0b
      000020 26 03            [ 1]  161 	jrne	00111$
      000022 CCr00r28         [ 2]  162 	jp	00112$
      000025                        163 00111$:
      000025 CCr00r2D         [ 2]  164 	jp	00103$
      000028                        165 00112$:
                                    166 ; skipping generated iCode
                                    167 ; genAssign
      000028 4F               [ 1]  168 	clr	a
      000029 5F               [ 1]  169 	clrw	x
                                    170 ; genGoto
      00002A CCr00r38         [ 2]  171 	jp	00104$
                                    172 ; genLabel
      00002D                        173 00103$:
                                    174 ; genCast
                                    175 ; genAssign
      00002D C6u00u02         [ 1]  176 	ld	a, _UpdateLedState_ledId_65536_325+0
                                    177 ; genPlus
      000030 4C               [ 1]  178 	inc	a
                                    179 ; genCast
      000031 88               [ 1]  180 	push	a
      000032 49               [ 1]  181 	rlc	a
      000033 4F               [ 1]  182 	clr	a
      000034 A2 00            [ 1]  183 	sbc	a, #0x00
      000036 97               [ 1]  184 	ld	xl, a
      000037 84               [ 1]  185 	pop	a
                                    186 ; genAssign
                                    187 ; genLabel
      000038                        188 00104$:
                                    189 ; genCast
                                    190 ; genAssign
      000038 C7u00u02         [ 1]  191 	ld	_UpdateLedState_ledId_65536_325+0, a
                           00003B   192 	C$leds.c$103$1_0$325 ==.
                                    193 ;	../src/leds.c: 103: SetLedRaw(ledIdPrev, LED_OFF_STATE);
                                    194 ; genIPush
      00003B 4B 00            [ 1]  195 	push	#0x00
                                    196 ; genIPush
      00003D 3Bu00u03         [ 1]  197 	push	_UpdateLedState_ledIdPrev_65536_325+0
                                    198 ; genCall
      000040 CDr00r5A         [ 4]  199 	call	_SetLedRaw
      000043 85               [ 2]  200 	popw	x
                           000044   201 	C$leds.c$104$1_0$325 ==.
                                    202 ;	../src/leds.c: 104: SetLedRaw(ledId,GetLedState(ledId));
                                    203 ; genIPush
      000044 3Bu00u02         [ 1]  204 	push	_UpdateLedState_ledId_65536_325+0
                                    205 ; genCall
      000047 CDr01r29         [ 4]  206 	call	_GetLedState
      00004A 5B 01            [ 2]  207 	addw	sp, #1
                                    208 ; genIPush
      00004C 88               [ 1]  209 	push	a
                                    210 ; genIPush
      00004D 3Bu00u02         [ 1]  211 	push	_UpdateLedState_ledId_65536_325+0
                                    212 ; genCall
      000050 CDr00r5A         [ 4]  213 	call	_SetLedRaw
      000053 85               [ 2]  214 	popw	x
                           000054   215 	C$leds.c$105$1_0$325 ==.
                                    216 ;	../src/leds.c: 105: ledIdPrev = ledId; 
                                    217 ; genAssign
      000054 55u00u02u00u03   [ 1]  218 	mov	_UpdateLedState_ledIdPrev_65536_325+0, _UpdateLedState_ledId_65536_325+0
                                    219 ; genLabel
      000059                        220 00101$:
                           000059   221 	C$leds.c$106$1_0$325 ==.
                                    222 ;	../src/leds.c: 106: }
                                    223 ; genEndFunction
                           000059   224 	C$leds.c$106$1_0$325 ==.
                           000059   225 	XG$UpdateLedState$0$0 ==.
      000059 81               [ 4]  226 	ret
                           00005A   227 	G$SetLedRaw$0$0 ==.
                           00005A   228 	C$leds.c$126$1_0$327 ==.
                                    229 ;	../src/leds.c: 126: void SetLedRaw(uint8_t ledId, uint8_t state){
                                    230 ; genLabel
                                    231 ;	-----------------------------------------
                                    232 ;	 function SetLedRaw
                                    233 ;	-----------------------------------------
                                    234 ;	Register assignment might be sub-optimal.
                                    235 ;	Stack space usage: 14 bytes.
      00005A                        236 _SetLedRaw:
      00005A 52 0E            [ 2]  237 	sub	sp, #14
                           00005C   238 	C$leds.c$128$1_0$327 ==.
                                    239 ;	../src/leds.c: 128: if(ledId >= NUM_OF_LEDS) return;
                                    240 ; genCmp
                                    241 ; genCmpTop
      00005C 7B 11            [ 1]  242 	ld	a, (0x11, sp)
      00005E A1 0C            [ 1]  243 	cp	a, #0x0c
      000060 24 03            [ 1]  244 	jrnc	00118$
      000062 CCr00r68         [ 2]  245 	jp	00102$
      000065                        246 00118$:
                                    247 ; skipping generated iCode
                                    248 ; genReturn
      000065 CCr01r26         [ 2]  249 	jp	00106$
                                    250 ; genLabel
      000068                        251 00102$:
                           000068   252 	C$leds.c$129$1_0$327 ==.
                                    253 ;	../src/leds.c: 129: ledId = ledId << 1;
                                    254 ; genCast
                                    255 ; genAssign
      000068 7B 11            [ 1]  256 	ld	a, (0x11, sp)
                                    257 ; genLeftShiftLiteral
      00006A 48               [ 1]  258 	sll	a
      00006B 6B 11            [ 1]  259 	ld	(0x11, sp), a
                           00006D   260 	C$leds.c$131$1_1$328 ==.
                                    261 ;	../src/leds.c: 131: GPIO_TypeDef * gpioPortPos = (GPIO_TypeDef * )leds_anode[ledId];
                                    262 ; skipping iCode since result will be rematerialized
                                    263 ; genCast
                                    264 ; genAssign
      00006D 5F               [ 1]  265 	clrw	x
      00006E 7B 11            [ 1]  266 	ld	a, (0x11, sp)
      000070 97               [ 1]  267 	ld	xl, a
                                    268 ; genLeftShiftLiteral
      000071 58               [ 2]  269 	sllw	x
      000072 51               [ 1]  270 	exgw	x, y
                                    271 ; genPlus
      000073 93               [ 1]  272 	ldw	x, y
      000074 1Cr00r00         [ 2]  273 	addw	x, #(_leds_anode+0)
                                    274 ; genPointerGet
      000077 FE               [ 2]  275 	ldw	x, (x)
                                    276 ; genCast
                                    277 ; genAssign
                                    278 ; genAssign
      000078 1F 02            [ 2]  279 	ldw	(0x02, sp), x
                           00007A   280 	C$leds.c$132$1_1$328 ==.
                                    281 ;	../src/leds.c: 132: GPIO_TypeDef * gpioPortNeg = (GPIO_TypeDef *) leds_cathode[ledId];
                                    282 ; skipping iCode since result will be rematerialized
                                    283 ; genPlus
      00007A 93               [ 1]  284 	ldw	x, y
      00007B 1Cr00r30         [ 2]  285 	addw	x, #(_leds_cathode+0)
                                    286 ; genPointerGet
      00007E FE               [ 2]  287 	ldw	x, (x)
                                    288 ; genCast
                                    289 ; genAssign
                                    290 ; genAssign
      00007F 1F 04            [ 2]  291 	ldw	(0x04, sp), x
                           000081   292 	C$leds.c$133$1_1$328 ==.
                                    293 ;	../src/leds.c: 133: uint8_t gpioPinPos = leds_anode[ledId+1];
                                    294 ; genCast
                                    295 ; genAssign
      000081 7B 11            [ 1]  296 	ld	a, (0x11, sp)
                                    297 ; genPlus
      000083 4C               [ 1]  298 	inc	a
                                    299 ; genCast
      000084 97               [ 1]  300 	ld	xl, a
      000085 9F               [ 1]  301 	ld	a, xl
      000086 49               [ 1]  302 	rlc	a
      000087 4F               [ 1]  303 	clr	a
      000088 A2 00            [ 1]  304 	sbc	a, #0x00
      00008A 95               [ 1]  305 	ld	xh, a
                                    306 ; genLeftShiftLiteral
      00008B 58               [ 2]  307 	sllw	x
      00008C 51               [ 1]  308 	exgw	x, y
                                    309 ; genPlus
      00008D 93               [ 1]  310 	ldw	x, y
      00008E 1Cr00r00         [ 2]  311 	addw	x, #(_leds_anode+0)
                                    312 ; genPointerGet
      000091 E6 01            [ 1]  313 	ld	a, (0x1, x)
      000093 6B 0E            [ 1]  314 	ld	(0x0e, sp), a
                           000095   315 	C$leds.c$134$1_1$328 ==.
                                    316 ;	../src/leds.c: 134: uint8_t gpioPinNeg = leds_cathode[ledId+1];
                                    317 ; genPlus
      000095 93               [ 1]  318 	ldw	x, y
      000096 1Cr00r30         [ 2]  319 	addw	x, #(_leds_cathode+0)
                                    320 ; genPointerGet
      000099 E6 01            [ 1]  321 	ld	a, (0x1, x)
      00009B 6B 01            [ 1]  322 	ld	(0x01, sp), a
                           00009D   323 	C$leds.c$138$1_1$327 ==.
                                    324 ;	../src/leds.c: 138: gpioPortPos->ODR |= (gpioPinPos);
                                    325 ; genPointerGet
      00009D 1E 02            [ 2]  326 	ldw	x, (0x02, sp)
      00009F F6               [ 1]  327 	ld	a, (x)
      0000A0 6B 06            [ 1]  328 	ld	(0x06, sp), a
                           0000A2   329 	C$leds.c$139$1_1$327 ==.
                                    330 ;	../src/leds.c: 139: gpioPortNeg->ODR &= ~(gpioPinNeg);
                                    331 ; genCpl
      0000A2 7B 01            [ 1]  332 	ld	a, (0x01, sp)
      0000A4 43               [ 1]  333 	cpl	a
      0000A5 6B 07            [ 1]  334 	ld	(0x07, sp), a
                           0000A7   335 	C$leds.c$141$1_1$327 ==.
                                    336 ;	../src/leds.c: 141: gpioPortPos->DDR |= gpioPinPos;
                                    337 ; genPlus
      0000A7 1E 02            [ 2]  338 	ldw	x, (0x02, sp)
      0000A9 5C               [ 1]  339 	incw	x
      0000AA 5C               [ 1]  340 	incw	x
      0000AB 1F 08            [ 2]  341 	ldw	(0x08, sp), x
                           0000AD   342 	C$leds.c$142$1_1$327 ==.
                                    343 ;	../src/leds.c: 142: gpioPortNeg->DDR |= gpioPinNeg;
                                    344 ; genPlus
      0000AD 1E 04            [ 2]  345 	ldw	x, (0x04, sp)
      0000AF 5C               [ 1]  346 	incw	x
      0000B0 5C               [ 1]  347 	incw	x
      0000B1 1F 0A            [ 2]  348 	ldw	(0x0a, sp), x
                           0000B3   349 	C$leds.c$143$1_1$327 ==.
                                    350 ;	../src/leds.c: 143: gpioPortPos->CR1 |= gpioPinPos;
                                    351 ; genPlus
      0000B3 16 02            [ 2]  352 	ldw	y, (0x02, sp)
      0000B5 72 A9 00 03      [ 2]  353 	addw	y, #0x0003
                           0000B9   354 	C$leds.c$144$1_1$327 ==.
                                    355 ;	../src/leds.c: 144: gpioPortNeg->CR1 |= gpioPinNeg;
                                    356 ; genPlus
      0000B9 1E 04            [ 2]  357 	ldw	x, (0x04, sp)
      0000BB 1C 00 03         [ 2]  358 	addw	x, #0x0003
      0000BE 1F 0C            [ 2]  359 	ldw	(0x0c, sp), x
                           0000C0   360 	C$leds.c$136$1_1$328 ==.
                                    361 ;	../src/leds.c: 136: if(state) //turn on
                                    362 ; genIfx
      0000C0 0D 12            [ 1]  363 	tnz	(0x12, sp)
      0000C2 26 03            [ 1]  364 	jrne	00119$
      0000C4 CCr00rF7         [ 2]  365 	jp	00104$
      0000C7                        366 00119$:
                           0000C7   367 	C$leds.c$138$2_1$329 ==.
                                    368 ;	../src/leds.c: 138: gpioPortPos->ODR |= (gpioPinPos);
                                    369 ; genOr
      0000C7 7B 06            [ 1]  370 	ld	a, (0x06, sp)
      0000C9 1A 0E            [ 1]  371 	or	a, (0x0e, sp)
                                    372 ; genPointerSet
      0000CB 1E 02            [ 2]  373 	ldw	x, (0x02, sp)
      0000CD F7               [ 1]  374 	ld	(x), a
                           0000CE   375 	C$leds.c$139$2_1$329 ==.
                                    376 ;	../src/leds.c: 139: gpioPortNeg->ODR &= ~(gpioPinNeg);
                                    377 ; genPointerGet
      0000CE 1E 04            [ 2]  378 	ldw	x, (0x04, sp)
      0000D0 F6               [ 1]  379 	ld	a, (x)
                                    380 ; genAnd
      0000D1 14 07            [ 1]  381 	and	a, (0x07, sp)
                                    382 ; genPointerSet
      0000D3 1E 04            [ 2]  383 	ldw	x, (0x04, sp)
      0000D5 F7               [ 1]  384 	ld	(x), a
                           0000D6   385 	C$leds.c$141$2_1$329 ==.
                                    386 ;	../src/leds.c: 141: gpioPortPos->DDR |= gpioPinPos;
                                    387 ; genPointerGet
      0000D6 1E 08            [ 2]  388 	ldw	x, (0x08, sp)
      0000D8 F6               [ 1]  389 	ld	a, (x)
                                    390 ; genOr
      0000D9 1A 0E            [ 1]  391 	or	a, (0x0e, sp)
                                    392 ; genPointerSet
      0000DB 1E 08            [ 2]  393 	ldw	x, (0x08, sp)
      0000DD F7               [ 1]  394 	ld	(x), a
                           0000DE   395 	C$leds.c$142$2_1$329 ==.
                                    396 ;	../src/leds.c: 142: gpioPortNeg->DDR |= gpioPinNeg;
                                    397 ; genPointerGet
      0000DE 1E 0A            [ 2]  398 	ldw	x, (0x0a, sp)
      0000E0 F6               [ 1]  399 	ld	a, (x)
                                    400 ; genOr
      0000E1 1A 01            [ 1]  401 	or	a, (0x01, sp)
                                    402 ; genPointerSet
      0000E3 1E 0A            [ 2]  403 	ldw	x, (0x0a, sp)
      0000E5 F7               [ 1]  404 	ld	(x), a
                           0000E6   405 	C$leds.c$143$2_1$329 ==.
                                    406 ;	../src/leds.c: 143: gpioPortPos->CR1 |= gpioPinPos;
                                    407 ; genPointerGet
      0000E6 90 F6            [ 1]  408 	ld	a, (y)
                                    409 ; genOr
      0000E8 1A 0E            [ 1]  410 	or	a, (0x0e, sp)
                                    411 ; genPointerSet
      0000EA 90 F7            [ 1]  412 	ld	(y), a
                           0000EC   413 	C$leds.c$144$2_1$329 ==.
                                    414 ;	../src/leds.c: 144: gpioPortNeg->CR1 |= gpioPinNeg;
                                    415 ; genPointerGet
      0000EC 1E 0C            [ 2]  416 	ldw	x, (0x0c, sp)
      0000EE F6               [ 1]  417 	ld	a, (x)
                                    418 ; genOr
      0000EF 1A 01            [ 1]  419 	or	a, (0x01, sp)
                                    420 ; genPointerSet
      0000F1 1E 0C            [ 2]  421 	ldw	x, (0x0c, sp)
      0000F3 F7               [ 1]  422 	ld	(x), a
                                    423 ; genGoto
      0000F4 CCr01r26         [ 2]  424 	jp	00106$
                                    425 ; genLabel
      0000F7                        426 00104$:
                           0000F7   427 	C$leds.c$148$2_1$330 ==.
                                    428 ;	../src/leds.c: 148: gpioPortPos->ODR &= ~(gpioPinPos);
                                    429 ; genCpl
      0000F7 03 0E            [ 1]  430 	cpl	(0x0e, sp)
                                    431 ; genAnd
      0000F9 7B 06            [ 1]  432 	ld	a, (0x06, sp)
      0000FB 14 0E            [ 1]  433 	and	a, (0x0e, sp)
                                    434 ; genPointerSet
      0000FD 1E 02            [ 2]  435 	ldw	x, (0x02, sp)
      0000FF F7               [ 1]  436 	ld	(x), a
                           000100   437 	C$leds.c$149$2_1$330 ==.
                                    438 ;	../src/leds.c: 149: gpioPortNeg->ODR &= ~(gpioPinNeg);
                                    439 ; genPointerGet
      000100 1E 04            [ 2]  440 	ldw	x, (0x04, sp)
      000102 F6               [ 1]  441 	ld	a, (x)
                                    442 ; genAnd
      000103 14 07            [ 1]  443 	and	a, (0x07, sp)
                                    444 ; genPointerSet
      000105 1E 04            [ 2]  445 	ldw	x, (0x04, sp)
      000107 F7               [ 1]  446 	ld	(x), a
                           000108   447 	C$leds.c$150$2_1$330 ==.
                                    448 ;	../src/leds.c: 150: gpioPortPos->DDR &= ~gpioPinPos;
                                    449 ; genPointerGet
      000108 1E 08            [ 2]  450 	ldw	x, (0x08, sp)
      00010A F6               [ 1]  451 	ld	a, (x)
                                    452 ; genAnd
      00010B 14 0E            [ 1]  453 	and	a, (0x0e, sp)
                                    454 ; genPointerSet
      00010D 1E 08            [ 2]  455 	ldw	x, (0x08, sp)
      00010F F7               [ 1]  456 	ld	(x), a
                           000110   457 	C$leds.c$151$2_1$330 ==.
                                    458 ;	../src/leds.c: 151: gpioPortNeg->DDR &= ~gpioPinNeg;
                                    459 ; genPointerGet
      000110 1E 0A            [ 2]  460 	ldw	x, (0x0a, sp)
      000112 F6               [ 1]  461 	ld	a, (x)
                                    462 ; genAnd
      000113 14 07            [ 1]  463 	and	a, (0x07, sp)
                                    464 ; genPointerSet
      000115 1E 0A            [ 2]  465 	ldw	x, (0x0a, sp)
      000117 F7               [ 1]  466 	ld	(x), a
                           000118   467 	C$leds.c$152$2_1$330 ==.
                                    468 ;	../src/leds.c: 152: gpioPortPos->CR1 &= ~gpioPinPos;
                                    469 ; genPointerGet
      000118 90 F6            [ 1]  470 	ld	a, (y)
                                    471 ; genAnd
      00011A 14 0E            [ 1]  472 	and	a, (0x0e, sp)
                                    473 ; genPointerSet
      00011C 90 F7            [ 1]  474 	ld	(y), a
                           00011E   475 	C$leds.c$153$2_1$330 ==.
                                    476 ;	../src/leds.c: 153: gpioPortNeg->CR1 &= ~gpioPinNeg;
                                    477 ; genPointerGet
      00011E 1E 0C            [ 2]  478 	ldw	x, (0x0c, sp)
      000120 F6               [ 1]  479 	ld	a, (x)
                                    480 ; genAnd
      000121 14 07            [ 1]  481 	and	a, (0x07, sp)
                                    482 ; genPointerSet
      000123 1E 0C            [ 2]  483 	ldw	x, (0x0c, sp)
      000125 F7               [ 1]  484 	ld	(x), a
                                    485 ; genLabel
      000126                        486 00106$:
                           000126   487 	C$leds.c$155$1_1$327 ==.
                                    488 ;	../src/leds.c: 155: }
                                    489 ; genEndFunction
      000126 5B 0E            [ 2]  490 	addw	sp, #14
                           000128   491 	C$leds.c$155$1_1$327 ==.
                           000128   492 	XG$SetLedRaw$0$0 ==.
      000128 81               [ 4]  493 	ret
                           000129   494 	G$GetLedState$0$0 ==.
                           000129   495 	C$leds.c$158$1_1$332 ==.
                                    496 ;	../src/leds.c: 158: uint8_t GetLedState(uint8_t ledID)
                                    497 ; genLabel
                                    498 ;	-----------------------------------------
                                    499 ;	 function GetLedState
                                    500 ;	-----------------------------------------
                                    501 ;	Register assignment might be sub-optimal.
                                    502 ;	Stack space usage: 0 bytes.
      000129                        503 _GetLedState:
                           000129   504 	C$leds.c$161$1_0$332 ==.
                                    505 ;	../src/leds.c: 161: return (ledsState & (v << ledID))?1:0;
                                    506 ; genAssign
      000129 7B 03            [ 1]  507 	ld	a, (0x03, sp)
                                    508 ; genLeftShift
      00012B 5F               [ 1]  509 	clrw	x
      00012C 5C               [ 1]  510 	incw	x
      00012D 4D               [ 1]  511 	tnz	a
      00012E 27 04            [ 1]  512 	jreq	00111$
      000130                        513 00110$:
      000130 58               [ 2]  514 	sllw	x
      000131 4A               [ 1]  515 	dec	a
      000132 26 FC            [ 1]  516 	jrne	00110$
      000134                        517 00111$:
                                    518 ; genAnd
      000134 9F               [ 1]  519 	ld	a, xl
      000135 C4u00u01         [ 1]  520 	and	a, _ledsState+1
      000138 97               [ 1]  521 	ld	xl, a
      000139 9E               [ 1]  522 	ld	a, xh
      00013A C4u00u00         [ 1]  523 	and	a, _ledsState+0
      00013D 95               [ 1]  524 	ld	xh, a
                                    525 ; genIfx
      00013E 5D               [ 2]  526 	tnzw	x
      00013F 26 03            [ 1]  527 	jrne	00112$
      000141 CCr01r49         [ 2]  528 	jp	00103$
      000144                        529 00112$:
                                    530 ; genAssign
      000144 5F               [ 1]  531 	clrw	x
      000145 5C               [ 1]  532 	incw	x
                                    533 ; genGoto
      000146 CCr01r4A         [ 2]  534 	jp	00104$
                                    535 ; genLabel
      000149                        536 00103$:
                                    537 ; genAssign
      000149 5F               [ 1]  538 	clrw	x
                                    539 ; genLabel
      00014A                        540 00104$:
                                    541 ; genCast
                                    542 ; genAssign
      00014A 9F               [ 1]  543 	ld	a, xl
                                    544 ; genReturn
                                    545 ; genLabel
      00014B                        546 00101$:
                           00014B   547 	C$leds.c$162$1_0$332 ==.
                                    548 ;	../src/leds.c: 162: }
                                    549 ; genEndFunction
                           00014B   550 	C$leds.c$162$1_0$332 ==.
                           00014B   551 	XG$GetLedState$0$0 ==.
      00014B 81               [ 4]  552 	ret
                           00014C   553 	G$SetLedState$0$0 ==.
                           00014C   554 	C$leds.c$165$1_0$334 ==.
                                    555 ;	../src/leds.c: 165: void SetLedState(uint8_t ledID, uint8_t state)
                                    556 ; genLabel
                                    557 ;	-----------------------------------------
                                    558 ;	 function SetLedState
                                    559 ;	-----------------------------------------
                                    560 ;	Register assignment might be sub-optimal.
                                    561 ;	Stack space usage: 0 bytes.
      00014C                        562 _SetLedState:
                           00014C   563 	C$leds.c$167$2_0$334 ==.
                                    564 ;	../src/leds.c: 167: uint16_t v = 1;
                                    565 ; genAssign
      00014C 5F               [ 1]  566 	clrw	x
      00014D 5C               [ 1]  567 	incw	x
                           00014E   568 	C$leds.c$168$1_0$334 ==.
                                    569 ;	../src/leds.c: 168: if(state) ledsState |= (v << ledID);
                                    570 ; genAssign
      00014E 7B 03            [ 1]  571 	ld	a, (0x03, sp)
                                    572 ; genLeftShift
      000150 4D               [ 1]  573 	tnz	a
      000151 27 04            [ 1]  574 	jreq	00112$
      000153                        575 00111$:
      000153 58               [ 2]  576 	sllw	x
      000154 4A               [ 1]  577 	dec	a
      000155 26 FC            [ 1]  578 	jrne	00111$
      000157                        579 00112$:
                                    580 ; genIfx
      000157 0D 04            [ 1]  581 	tnz	(0x04, sp)
      000159 26 03            [ 1]  582 	jrne	00113$
      00015B CCr01r6E         [ 2]  583 	jp	00102$
      00015E                        584 00113$:
                                    585 ; genOr
      00015E 9F               [ 1]  586 	ld	a, xl
      00015F CAu00u01         [ 1]  587 	or	a, _ledsState+1
      000162 97               [ 1]  588 	ld	xl, a
      000163 9E               [ 1]  589 	ld	a, xh
      000164 CAu00u00         [ 1]  590 	or	a, _ledsState+0
      000167 95               [ 1]  591 	ld	xh, a
                                    592 ; genAssign
      000168 CFu00u00         [ 2]  593 	ldw	_ledsState+0, x
                                    594 ; genGoto
      00016B CCr01r7C         [ 2]  595 	jp	00104$
                                    596 ; genLabel
      00016E                        597 00102$:
                           00016E   598 	C$leds.c$169$1_0$334 ==.
                                    599 ;	../src/leds.c: 169: else ledsState &= ~(v << ledID); 
                                    600 ; genCpl
      00016E 53               [ 2]  601 	cplw	x
      00016F 9F               [ 1]  602 	ld	a, xl
                                    603 ; genAnd
      000170 C4u00u01         [ 1]  604 	and	a, _ledsState+1
      000173 97               [ 1]  605 	ld	xl, a
      000174 9E               [ 1]  606 	ld	a, xh
      000175 C4u00u00         [ 1]  607 	and	a, _ledsState+0
      000178 95               [ 1]  608 	ld	xh, a
                                    609 ; genAssign
      000179 CFu00u00         [ 2]  610 	ldw	_ledsState+0, x
                                    611 ; genLabel
      00017C                        612 00104$:
                           00017C   613 	C$leds.c$170$1_0$334 ==.
                                    614 ;	../src/leds.c: 170: }
                                    615 ; genEndFunction
                           00017C   616 	C$leds.c$170$1_0$334 ==.
                           00017C   617 	XG$SetLedState$0$0 ==.
      00017C 81               [ 4]  618 	ret
                                    619 	.area CODE
                                    620 	.area CONST
                           000000   621 G$leds_anode$0_0$0 == .
      000000                        622 _leds_anode:
      000000 50 0A                  623 	.dw #0x500a
      000002 00 08                  624 	.dw #0x0008
      000004 50 00                  625 	.dw #0x5000
      000006 00 08                  626 	.dw #0x0008
      000008 50 05                  627 	.dw #0x5005
      00000A 00 10                  628 	.dw #0x0010
      00000C 50 00                  629 	.dw #0x5000
      00000E 00 08                  630 	.dw #0x0008
      000010 50 0A                  631 	.dw #0x500a
      000012 00 08                  632 	.dw #0x0008
      000014 50 05                  633 	.dw #0x5005
      000016 00 10                  634 	.dw #0x0010
      000018 50 05                  635 	.dw #0x5005
      00001A 00 20                  636 	.dw #0x0020
      00001C 50 00                  637 	.dw #0x5000
      00001E 00 08                  638 	.dw #0x0008
      000020 50 05                  639 	.dw #0x5005
      000022 00 20                  640 	.dw #0x0020
      000024 50 0A                  641 	.dw #0x500a
      000026 00 08                  642 	.dw #0x0008
      000028 50 05                  643 	.dw #0x5005
      00002A 00 10                  644 	.dw #0x0010
      00002C 50 05                  645 	.dw #0x5005
      00002E 00 20                  646 	.dw #0x0020
                           000030   647 G$leds_cathode$0_0$0 == .
      000030                        648 _leds_cathode:
      000030 50 00                  649 	.dw #0x5000
      000032 00 08                  650 	.dw #0x0008
      000034 50 0A                  651 	.dw #0x500a
      000036 00 08                  652 	.dw #0x0008
      000038 50 00                  653 	.dw #0x5000
      00003A 00 08                  654 	.dw #0x0008
      00003C 50 05                  655 	.dw #0x5005
      00003E 00 10                  656 	.dw #0x0010
      000040 50 05                  657 	.dw #0x5005
      000042 00 10                  658 	.dw #0x0010
      000044 50 0A                  659 	.dw #0x500a
      000046 00 08                  660 	.dw #0x0008
      000048 50 00                  661 	.dw #0x5000
      00004A 00 08                  662 	.dw #0x0008
      00004C 50 05                  663 	.dw #0x5005
      00004E 00 20                  664 	.dw #0x0020
      000050 50 0A                  665 	.dw #0x500a
      000052 00 08                  666 	.dw #0x0008
      000054 50 05                  667 	.dw #0x5005
      000056 00 20                  668 	.dw #0x0020
      000058 50 05                  669 	.dw #0x5005
      00005A 00 20                  670 	.dw #0x0020
      00005C 50 05                  671 	.dw #0x5005
      00005E 00 10                  672 	.dw #0x0010
                                    673 	.area INITIALIZER
                                    674 	.area CABS (ABS)
